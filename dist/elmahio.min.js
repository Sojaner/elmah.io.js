/*!
 * elmah.io Javascript Logger - version 3.0.0
 * (c) 2018 elmah.io, Apache 2.0 License, https://elmah.io
 */
!function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof exports?module.exports=n(e):e.Elmahio=n(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(e){"use strict";var n=document.getElementsByTagName("script"),t=function(e){var n=new Object;if(!e)return n;for(var t=e.split(/[;&]/),r=0;r<t.length;r++){var o=t[r].split("=");if(o&&2==o.length){var a=unescape(o[0]),i=unescape(o[1]);i=i.replace(/\+/g," "),n[a]=i}}return n}(n[n.length-1].src.replace(/^[^\?]+\??/,"")),r=function(e){var n,t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t}(t),o={label:" elmah.io debugger : On ",labelCSS:"background: #06a89c; color: #ffffff; display: inline-block; font-size: 14px;",successCSS:"background: #d4edda; color: #155724; display: inline-block; font-size: 13px;",errorCSS:"background: #f8d7da; color: #721c24; display: inline-block; font-size: 13px;",warningCSS:"background: #fff3cd; color: #856404; display: inline-block; font-size: 13px;",lightCSS:"background: #e2e3e5; color: #383d41; display: inline-block; font-size: 13px;"},a={apiKey:null,logId:null,debug:!1,application:null,onMessage:null,onError:null,onFilter:null},i=function(){var e={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(var r=function(t){for(var r in t)t.hasOwnProperty(r)&&(n&&"[object Object]"===Object.prototype.toString.call(t[r])?e[r]=i(e[r],t[r]):e[r]=t[r])};t<arguments.length;t++){r(arguments[t])}return e};function l(){var n=e.location.search.substr(1);return null!=n&&""!=n?function(e){for(var n=[],t=e.split("&"),r=0;r<t.length;r++){var o=t[r].split("=");n.push({key:o[0],value:o[1]})}return n}(n):{}}function s(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function c(e){var n=/(^|@)\S+\:\d+/,t=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(n){return void 0!==n.stacktrace||void 0!==n["opera#sourceloc"]?this.parseOpera(n):n.stack&&n.stack.match(t)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):e.debug?void console.log("%c Cannot parse given Error object",o.warningCSS):null},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var n=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(t[0])>-1?void 0:t[0],lineNumber:t[1],columnNumber:t[2],source:e}},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,t=e.match(n),r=t&&t[1]?t[1]:void 0,o=this.extractLocation(e.replace(n,""));return{functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e}},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,t=e.message.split("\n"),r=[],o=2,a=t.length;o<a;o+=2){var i=n.exec(t[o]);i&&r.push({fileName:i[2],lineNumber:i[1],source:t[o]})}return r},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,t=e.stacktrace.split("\n"),r=[],o=0,a=t.length;o<a;o+=2){var i=n.exec(t[o]);i&&r.push({functionName:i[3]||void 0,fileName:i[2],lineNumber:i[1],source:t[o]})}return r},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this).map(function(e){var n,t=e.split("@"),r=this.extractLocation(t.pop()),o=t.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;return o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1")),{functionName:a,args:void 0===n||"[arguments not available]"===n?void 0:n.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)}}}var u=function(n){var u,p={};function d(){var n={url:[document.location.protocol,"//",document.location.host,document.location.pathname,document.location.hash].join("")||"/",application:u.application},t=[];navigator.language&&t.push({key:"User-Language",value:navigator.language}),document.documentMode&&t.push({key:"Document-Mode",value:document.documentMode}),(e.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth)&&t.push({key:"Browser-Width",value:e.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}),(e.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight)&&t.push({key:"Browser-Height",value:e.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}),null!=(screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type)&&t.push({key:"Screen-Orientation",value:(screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type).split("-")[0]}),screen.width&&t.push({key:"Screen-Width",value:screen.width}),screen.height&&t.push({key:"Screen-Height",value:screen.height}),screen.colorDepth&&t.push({key:"Color-Depth",value:screen.colorDepth}),t.push({key:"X-ELMAHIO-SEARCH-isClientside",value:"true"}),n.data=t;var r=[];return navigator.userAgent&&r.push({key:"User-Agent",value:navigator.userAgent}),document.referrer&&r.push({key:"Referer",value:document.referrer}),n.serverVariables=r,n}function g(e,n){u.debug&&("error"===e?console.log("%c ⯈ Error log: %c ✕ Not created ",o.lightCSS,o.errorCSS):console.log("%c ⯈ Error log: %c ✔ "+n+" at "+(new Date).toLocaleString()+" ",o.lightCSS,o.successCSS))}var f=function(e,n,o,a,i,p){var g=e,f=n,m=a,h=p,v=i,y=1,b=l();if((null===g||null===f)&&2!==r)return console.log("Login api error");t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")&&(g=t.apiKey,f=t.logId);var S=new XMLHttpRequest;if(S.open("POST","https://api.elmah.io/v3/messages/"+f+"?api_key="+g,!0),S.setRequestHeader("Content-type","application/json"),S.onload=function(e){4===S.readyState&&201===S.status&&o("success",S.statusText)},S.onerror=function(e){o("error",S.statusText),null!==u.onError&&u.onError(S.status,S.statusText)},"Log"!==m){var O=h?c(u).parse(h):null,k={title:v,source:O&&O.length>0?O[0].fileName:null,detail:h?h.stack:null,severity:m,type:h?h.name:null,queryString:JSON.parse(JSON.stringify(b))};k=s(k,d())}else k=h;null!==u.onFilter&&u.onFilter(k)&&(y=0),null!==u.onMessage&&u.onMessage(k),1===y&&S.send(JSON.stringify(k))};return p.error=function(e){f(u.apiKey,u.logId,g,"Error",e)},p.error=function(e,n){f(u.apiKey,u.logId,g,"Error",e,n)},p.verbose=function(e){f(u.apiKey,u.logId,g,"Verbose",e)},p.verbose=function(e,n){f(u.apiKey,u.logId,g,"Verbose",e,n)},p.debug=function(e){f(u.apiKey,u.logId,g,"Debug",e)},p.debug=function(e,n){f(u.apiKey,u.logId,g,"Debug",e,n)},p.information=function(e){f(u.apiKey,u.logId,g,"Information",e)},p.information=function(e,n){f(u.apiKey,u.logId,g,"Information",e,n)},p.warning=function(e){f(u.apiKey,u.logId,g,"Warning",e)},p.warning=function(e,n){f(u.apiKey,u.logId,g,"Warning",e,n)},p.fatal=function(e){f(u.apiKey,u.logId,g,"Fatal",e)},p.fatal=function(e,n){f(u.apiKey,u.logId,g,"Fatal",e,n)},p.log=function(e){f(u.apiKey,u.logId,g,"Log",null,e)},p.init=function(n){u=i(a,n||{}),e.onerror=function(e,n,o,a,i){var p={message:e,source:n,lineno:o,colno:a,error:i};return function(e,n,o,a){var i=e,p=n,g=a,f=1,m=l();if((null===i||null===p)&&2!==r)return console.log("Login api error");t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")&&(i=t.apiKey,p=t.logId);var h=new XMLHttpRequest;h.open("POST","https://api.elmah.io/v3/messages/"+p+"?api_key="+i,!0),h.setRequestHeader("Content-type","application/json"),h.onload=function(e){4===h.readyState&&201===h.status&&o("success",h.statusText)},h.onerror=function(e){o("error",h.statusText),null!==u.onError&&u.onError(h.status,h.statusText)};var v=c(u).parse(g.error),y={detail:g.error.stack,title:g.message,source:v&&v.length>0?v[0].fileName:null,severity:"Error",type:g.error.name,queryString:JSON.parse(JSON.stringify(m))};y=s(y,d()),null!==u.onFilter&&u.onFilter(y)&&(f=0),null!==u.onMessage&&u.onMessage(y),1===f&&h.send(JSON.stringify(y))}(u.apiKey,u.logId,g,p),!1}},p.init(n),u.debug&&console.log("%c"+o.label,o.labelCSS),p};return r&&t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")?new u:u});
//# sourceMappingURL=elmahio.min.js.map
