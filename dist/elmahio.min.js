/*!
 * elmah.io Javascript Logger - version 1.0.2
 * (c) 2018 elmah.io, Apache 2.0 License, https://elmah.io
 */
!function(e,n){"function"==typeof define&&define.amd?define([],function(){return n(e)}):"object"==typeof exports?module.exports=n(e):e.Elmahio=n(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(e){"use strict";var n=document.getElementsByTagName("script"),t=function(e){var n=new Object;if(!e)return n;for(var t=e.split(/[;&]/),r=0;r<t.length;r++){var o=t[r].split("=");if(o&&2==o.length){var i=unescape(o[0]),a=unescape(o[1]);a=a.replace(/\+/g," "),n[i]=a}}return n}(n[n.length-1].src.replace(/^[^\?]+\??/,"")),r=function(e){var n,t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t}(t),o={label:" elmah.io debugger : On ",labelCSS:"background: #06a89c; color: #ffffff; display: inline-block; font-size: 14px;",successCSS:"background: #d4edda; color: #155724; display: inline-block; font-size: 13px;",errorCSS:"background: #f8d7da; color: #721c24; display: inline-block; font-size: 13px;",warningCSS:"background: #fff3cd; color: #856404; display: inline-block; font-size: 13px;",lightCSS:"background: #e2e3e5; color: #383d41; display: inline-block; font-size: 13px;"},i={apiKey:null,logId:null,debug:!1,application:null},a=function(){var e={},n=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],t++);for(var r=function(t){for(var r in t)t.hasOwnProperty(r)&&(n&&"[object Object]"===Object.prototype.toString.call(t[r])?e[r]=a(e[r],t[r]):e[r]=t[r])};t<arguments.length;t++){r(arguments[t])}return e};function l(){var n=e.location.search.substr(1);return null!=n&&""!=n?function(e){for(var n=[],t=e.split("&"),r=0;r<t.length;r++){var o=t[r].split("=");n.push({key:o[0],value:o[1]})}return n}(n):{}}function c(e,n){var t={};for(var r in e)t[r]=e[r];for(var r in n)t[r]=n[r];return t}function s(e){var n=/(^|@)\S+\:\d+/,t=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(n){return void 0!==n.stacktrace||void 0!==n["opera#sourceloc"]?this.parseOpera(n):n.stack&&n.stack.match(t)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):e.debug?void console.log("%c Cannot parse given Error object",o.warningCSS):null},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var n=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(n.pop());return{functionName:n.join(" ")||void 0,fileName:["eval","<anonymous>"].indexOf(t[0])>-1?void 0:t[0],lineNumber:t[1],columnNumber:t[2],source:e}},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,t=e.match(n),r=t&&t[1]?t[1]:void 0,o=this.extractLocation(e.replace(n,""));return{functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e}},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,t=e.message.split("\n"),r=[],o=2,i=t.length;o<i;o+=2){var a=n.exec(t[o]);a&&r.push({fileName:a[2],lineNumber:a[1],source:t[o]})}return r},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,t=e.stacktrace.split("\n"),r=[],o=0,i=t.length;o<i;o+=2){var a=n.exec(t[o]);a&&r.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:t[o]})}return r},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this).map(function(e){var n,t=e.split("@"),r=this.extractLocation(t.pop()),o=t.shift()||"",i=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;return o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1")),{functionName:i,args:void 0===n||"[arguments not available]"===n?void 0:n.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)}}}var u=function(n){var u,p={};function d(){var n={url:[document.location.protocol,"//",document.location.host,document.location.pathname,document.location.hash].join("")||"/",application:u.application},t=[];navigator.language&&t.push({key:"User-Language",value:navigator.language}),document.documentMode&&t.push({key:"Document-Mode",value:document.documentMode}),(e.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth)&&t.push({key:"Browser-Width",value:e.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}),(e.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight)&&t.push({key:"Browser-Height",value:e.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight}),null!=(screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type)&&t.push({key:"Screen-Orientation",value:(screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type).split("-")[0]}),screen.width&&t.push({key:"Screen-Width",value:screen.width}),screen.height&&t.push({key:"Screen-Height",value:screen.height}),screen.colorDepth&&t.push({key:"Color-Depth",value:screen.colorDepth}),t.push({key:"X-ELMAHIO-SEARCH-isClientside",value:"true"}),n.data=t;var r=[];return navigator.userAgent&&r.push({key:"User-Agent",value:navigator.userAgent}),document.referrer&&r.push({key:"Referer",value:document.referrer}),n.serverVariables=r,n}function f(e,n){u.debug&&("error"===e?console.log("%c ⯈ Error log: %c ✕ Not created ",o.lightCSS,o.errorCSS):console.log("%c ⯈ Error log: %c ✔ "+n+" at "+(new Date).toLocaleString()+" ",o.lightCSS,o.successCSS))}var g=function(e,n,o,i,a,p){var f=e,g=n,m=i,h=p,v=a,y=l();if((null===f||null===g)&&2!==r)return console.log("Login api error");t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")&&(f=t.apiKey,g=t.logId);var b=new XMLHttpRequest;b.open("POST","https://api.elmah.io/v3/messages/"+g+"?api_key="+f,!0),b.setRequestHeader("Content-type","application/json"),b.onload=function(e){4===b.readyState&&201===b.status&&o("success",b.statusText)},b.onerror=function(e){o("error",b.statusText)};var S=h?s(u).parse(h):null,O={title:v,source:S&&S.length>0?S[0].fileName:null,detail:h?h.stack:null,severity:m,type:h?h.name:null,queryString:JSON.parse(JSON.stringify(y))};O=c(O,d()),b.send(JSON.stringify(O))};return p.error=function(e){g(u.apiKey,u.logId,f,"Error",e)},p.error=function(e,n){g(u.apiKey,u.logId,f,"Error",e,n)},p.verbose=function(e){g(u.apiKey,u.logId,f,"Verbose",e)},p.verbose=function(e,n){g(u.apiKey,u.logId,f,"Verbose",e,n)},p.debug=function(e){g(u.apiKey,u.logId,f,"Debug",e)},p.debug=function(e,n){g(u.apiKey,u.logId,f,"Debug",e,n)},p.information=function(e){g(u.apiKey,u.logId,f,"Information",e)},p.information=function(e,n){g(u.apiKey,u.logId,f,"Information",e,n)},p.warning=function(e){g(u.apiKey,u.logId,f,"Warning",e)},p.warning=function(e,n){g(u.apiKey,u.logId,f,"Warning",e,n)},p.fatal=function(e){g(u.apiKey,u.logId,f,"Fatal",e)},p.fatal=function(e,n){g(u.apiKey,u.logId,f,"Fatal",e,n)},p.log=function(e){g(u.apiKey,u.logId,f,"Log function",e)},p.log=function(e,n){g(u.apiKey,u.logId,f,"Log function",e,n)},p.init=function(n){u=a(i,n||{}),e.onerror=function(e,n,o,i,a){var p={message:e,source:n,lineno:o,colno:i,error:a};return function(e,n,o,i){var a=e,p=n,f=i,g=l();if((null===a||null===p)&&2!==r)return console.log("Login api error");t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")&&(a=t.apiKey,p=t.logId);var m=new XMLHttpRequest;m.open("POST","https://api.elmah.io/v3/messages/"+p+"?api_key="+a,!0),m.setRequestHeader("Content-type","application/json"),m.onload=function(e){4===m.readyState&&201===m.status&&o("success",m.statusText)},m.onerror=function(e){o("error",m.statusText)};var h=s(u).parse(f.error),v={detail:f.error.stack,title:f.message,source:h&&h.length>0?h[0].fileName:null,severity:"Error",type:f.error.name,queryString:JSON.parse(JSON.stringify(g))};v=c(v,d()),m.send(JSON.stringify(v))}(u.apiKey,u.logId,f,p),!1}},p.init(n),u.debug&&console.log("%c"+o.label,o.labelCSS),p};return r&&t.hasOwnProperty("apiKey")&&t.hasOwnProperty("logId")?new u:u});
//# sourceMappingURL=elmahio.min.js.map
