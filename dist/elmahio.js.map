{"version":3,"names":[],"mappings":"","sources":["elmahio.js"],"sourcesContent":["/*!\n * elmah.io Javascript Logger - version 1.0.2\n * (c) 2018 elmah.io, Apache 2.0 License, https://elmah.io\n */\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine([], function () {\n\t\t\treturn factory(root);\n\t\t});\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.Elmahio = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : this, function (window) {\n\n\t'use strict';\n\n\t//\n\t// Shared Variables\n\t//\n\n\tvar scriptFile = document.getElementsByTagName('script');\n\tvar\tscriptIndex = scriptFile.length - 1;\n\tvar\tmyScript = scriptFile[scriptIndex];\n\tvar\tqueryString = myScript.src.replace(/^[^\\?]+\\??/, '');\n\tvar\tparams = parseQuery(queryString);\n\tvar\tparamsLength = objectLength(params);\n\n\tvar debugSettings = {\n\t\tlabel: ' elmah.io debugger : On ',\n\t\tlabelCSS: 'background: #06a89c; color: #ffffff; display: inline-block; font-size: 14px;',\n\t\tsuccessCSS: 'background: #d4edda; color: #155724; display: inline-block; font-size: 13px;',\n\t\terrorCSS: 'background: #f8d7da; color: #721c24; display: inline-block; font-size: 13px;',\n\t\twarningCSS: 'background: #fff3cd; color: #856404; display: inline-block; font-size: 13px;',\n\t\tlightCSS: 'background: #e2e3e5; color: #383d41; display: inline-block; font-size: 13px;'\n\t};\n\n\tvar defaults = {\n\t\tapiKey: null,\n\t\tlogId: null,\n\t\tdebug: false,\n\t\tapplication: null,\n\t\tonMessage: null,\n\t\tonError: null,\n\t\tonFilter: null\n\t};\n\n\t//\n\t// Shared Methods\n\t//\n\n\tvar extend = function () {\n\n\t\t// Variables\n\t\tvar extended = {};\n\t\tvar deep = false;\n\t\tvar i = 0;\n\n\t\t// Check if a deep merge\n\t\tif (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n\t\t\tdeep = arguments[0];\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge the object into the extended object\n\t\tvar merge = function (obj) {\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\t\t\t// If property is an object, merge properties\n\t\t\t\t\tif (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n\t\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\textended[prop] = obj[prop];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Loop through each object and conduct a merge\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar obj = arguments[i];\n\t\t\tmerge(obj);\n\t\t}\n\n\t\treturn extended;\n\n\t};\n\n\t//\n\t// Helpers\n\t//\n\n\tfunction parseQuery(query) {\n\t\tvar Params = new Object();\n\t\tif (!query) return Params; // return empty object\n\t\tvar Pairs = query.split(/[;&]/);\n\t\tfor (var i = 0; i < Pairs.length; i++) {\n\t\t\tvar KeyVal = Pairs[i].split('=');\n\t\t\tif (!KeyVal || KeyVal.length != 2) continue;\n\t\t\tvar key = unescape(KeyVal[0]);\n\t\t\tvar val = unescape(KeyVal[1]);\n\t\t\tval = val.replace(/\\+/g, ' ');\n\t\t\tParams[key] = val;\n\t\t}\n\t\treturn Params;\n\t}\n\n\tfunction objectLength(obj) {\n\t\tvar size = 0, key;\n\t\tfor (key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) size++;\n\t\t}\n\t\treturn size;\n\t};\n\n\tfunction getSearchParameters() {\n\t\tvar prmstr = window.location.search.substr(1);\n\t\treturn prmstr != null && prmstr != \"\" ? transformToAssocArray(prmstr) : {};\n\t}\n\n\tfunction transformToAssocArray(prmstr) {\n\t\tvar params = [];\n\t\tvar prmarr = prmstr.split(\"&\");\n\t\tfor (var i = 0; i < prmarr.length; i++) {\n\t\t\tvar tmparr = prmarr[i].split(\"=\");\n\t\t\tparams.push({\n\t\t\t\t'key': tmparr[0],\n\t\t\t\t'value': tmparr[1]\n\t\t\t});\n\t\t}\n\t\treturn params;\n\t}\n\n\tfunction merge_objects(obj1, obj2) {\n\t\tvar obj3 = {};\n\t\tfor (var attrname in obj1) {\n\t\t\tobj3[attrname] = obj1[attrname];\n\t\t}\n\t\tfor (var attrname in obj2) {\n\t\t\tobj3[attrname] = obj2[attrname];\n\t\t}\n\n\t\treturn obj3;\n\t}\n\n\tfunction ErrorStackParser(settings) {\n\t\t'use strict';\n\n\t\tvar FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n\t\tvar CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n\t\tvar SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n\t\treturn {\n\t\t\tparse: function (error) {\n\t\t\t\tif (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n\t\t\t\t\treturn this.parseOpera(error);\n\t\t\t\t} else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n\t\t\t\t\treturn this.parseV8OrIE(error);\n\t\t\t\t} else if (error.stack) {\n\t\t\t\t\treturn this.parseFFOrSafari(error);\n\t\t\t\t} else if (settings.debug) {\n\t\t\t\t\tconsole.log('%c Cannot parse given Error object', debugSettings.warningCSS);\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Separate line and column numbers from a string of the form: (URI:Line:Column)\n\t\t\textractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n\t\t\t\t// Fail-fast but return locations like \"(native)\"\n\t\t\t\tif (urlLike.indexOf(':') === -1) {\n\t\t\t\t\treturn [urlLike];\n\t\t\t\t}\n\n\t\t\t\tvar regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n\t\t\t\tvar parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n\t\t\t\treturn [parts[1], parts[2] || undefined, parts[3] || undefined];\n\t\t\t},\n\n\t\t\tparseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n\t\t\t\tvar filtered = error.stack.split('\\n').filter(function (line) {\n\t\t\t\t\treturn !!line.match(CHROME_IE_STACK_REGEXP);\n\t\t\t\t}, this);\n\n\t\t\t\treturn filtered.map(function (line) {\n\t\t\t\t\tif (line.indexOf('(eval ') > -1) {\n\t\t\t\t\t\t// Throw away eval information until we implement stacktrace.js/stackframe#8\n\t\t\t\t\t\tline = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n\t\t\t\t\t}\n\t\t\t\t\tvar tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n\t\t\t\t\tvar locationParts = this.extractLocation(tokens.pop());\n\t\t\t\t\tvar functionName = tokens.join(' ') || undefined;\n\t\t\t\t\tvar fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n\t\t\t\t\treturn ({\n\t\t\t\t\t\tfunctionName: functionName,\n\t\t\t\t\t\tfileName: fileName,\n\t\t\t\t\t\tlineNumber: locationParts[1],\n\t\t\t\t\t\tcolumnNumber: locationParts[2],\n\t\t\t\t\t\tsource: line\n\t\t\t\t\t});\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\tparseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n\t\t\t\tvar filtered = error.stack.split('\\n').filter(function (line) {\n\t\t\t\t\treturn !line.match(SAFARI_NATIVE_CODE_REGEXP);\n\t\t\t\t}, this);\n\n\t\t\t\treturn filtered.map(function (line) {\n\t\t\t\t\t// Throw away eval information until we implement stacktrace.js/stackframe#8\n\t\t\t\t\tif (line.indexOf(' > eval') > -1) {\n\t\t\t\t\t\tline = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n\t\t\t\t\t}\n\n\t\t\t\t\tif (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n\t\t\t\t\t\t// Safari eval frames only have function names and nothing else\n\t\t\t\t\t\treturn ({\n\t\t\t\t\t\t\tfunctionName: line\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n\t\t\t\t\t\tvar matches = line.match(functionNameRegex);\n\t\t\t\t\t\tvar functionName = matches && matches[1] ? matches[1] : undefined;\n\t\t\t\t\t\tvar locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n\t\t\t\t\t\treturn ({\n\t\t\t\t\t\t\tfunctionName: functionName,\n\t\t\t\t\t\t\tfileName: locationParts[0],\n\t\t\t\t\t\t\tlineNumber: locationParts[1],\n\t\t\t\t\t\t\tcolumnNumber: locationParts[2],\n\t\t\t\t\t\t\tsource: line\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t},\n\n\t\t\tparseOpera: function ErrorStackParser$$parseOpera(e) {\n\t\t\t\tif (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n\t\t\t\t\te.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n\t\t\t\t\treturn this.parseOpera9(e);\n\t\t\t\t} else if (!e.stack) {\n\t\t\t\t\treturn this.parseOpera10(e);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.parseOpera11(e);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tparseOpera9: function ErrorStackParser$$parseOpera9(e) {\n\t\t\t\tvar lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n\t\t\t\tvar lines = e.message.split('\\n');\n\t\t\t\tvar result = [];\n\n\t\t\t\tfor (var i = 2, len = lines.length; i < len; i += 2) {\n\t\t\t\t\tvar match = lineRE.exec(lines[i]);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tresult.push(({\n\t\t\t\t\t\t\tfileName: match[2],\n\t\t\t\t\t\t\tlineNumber: match[1],\n\t\t\t\t\t\t\tsource: lines[i]\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tparseOpera10: function ErrorStackParser$$parseOpera10(e) {\n\t\t\t\tvar lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n\t\t\t\tvar lines = e.stacktrace.split('\\n');\n\t\t\t\tvar result = [];\n\n\t\t\t\tfor (var i = 0, len = lines.length; i < len; i += 2) {\n\t\t\t\t\tvar match = lineRE.exec(lines[i]);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\t({\n\t\t\t\t\t\t\t\tfunctionName: match[3] || undefined,\n\t\t\t\t\t\t\t\tfileName: match[2],\n\t\t\t\t\t\t\t\tlineNumber: match[1],\n\t\t\t\t\t\t\t\tsource: lines[i]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t// Opera 10.65+ Error.stack very similar to FF/Safari\n\t\t\tparseOpera11: function ErrorStackParser$$parseOpera11(error) {\n\t\t\t\tvar filtered = error.stack.split('\\n').filter(function (line) {\n\t\t\t\t\treturn !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n\t\t\t\t}, this);\n\n\t\t\t\treturn filtered.map(function (line) {\n\t\t\t\t\tvar tokens = line.split('@');\n\t\t\t\t\tvar locationParts = this.extractLocation(tokens.pop());\n\t\t\t\t\tvar functionCall = (tokens.shift() || '');\n\t\t\t\t\tvar functionName = functionCall\n\t\t\t\t\t\t.replace(/<anonymous function(: (\\w+))?>/, '$2')\n\t\t\t\t\t\t.replace(/\\([^\\)]*\\)/g, '') || undefined;\n\t\t\t\t\tvar argsRaw;\n\t\t\t\t\tif (functionCall.match(/\\(([^\\)]*)\\)/)) {\n\t\t\t\t\t\targsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n\t\t\t\t\t}\n\t\t\t\t\tvar args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n\t\t\t\t\t\tundefined : argsRaw.split(',');\n\n\t\t\t\t\treturn ({\n\t\t\t\t\t\tfunctionName: functionName,\n\t\t\t\t\t\targs: args,\n\t\t\t\t\t\tfileName: locationParts[0],\n\t\t\t\t\t\tlineNumber: locationParts[1],\n\t\t\t\t\t\tcolumnNumber: locationParts[2],\n\t\t\t\t\t\tsource: line\n\t\t\t\t\t});\n\t\t\t\t}, this);\n\t\t\t}\n\t\t};\n\n\t}\n\n\n\t//\n\t// Constructor\n\t// Can be named anything you want\n\t//\n\n\tvar Constructor = function (options) {\n\n\t\t//\n\t\t// Unique Variables\n\t\t//\n\n\t\tvar publicAPIs = {};\n\t\tvar settings;\n\n\t\tfunction getPayload() {\n\t\t\tvar payload = {\n\t\t\t\t\"url\": [document.location.protocol, '//', document.location.host, document.location.pathname, document.location.hash].join('') || '/',\n\t\t\t\t\"application\": settings.application\n\t\t\t};\n\n\t\t\tvar payload_data = [];\n\n\t\t\tif (navigator.language) payload_data.push({ \"key\": \"User-Language\", \"value\": navigator.language });\n\t\t\tif (document.documentMode) payload_data.push({ \"key\": \"Document-Mode\", \"value\": document.documentMode });\n\t\t\tif (window.innerWidth || document.documentElement.clientWidth || document.getElementsByTagName('body')[0].clientWidth) payload_data.push({ \"key\": \"Browser-Width\", \"value\": window.innerWidth || document.documentElement.clientWidth || document.getElementsByTagName('body')[0].clientWidth });\n\t\t\tif (window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight) payload_data.push({ \"key\": \"Browser-Height\", \"value\": window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight });\n\t\t\tif ((screen.msOrientation || (screen.orientation || screen.mozOrientation || {}).type) != undefined) payload_data.push({ \"key\": \"Screen-Orientation\", \"value\": ((screen.msOrientation || (screen.orientation || screen.mozOrientation || {}).type).split(\"-\"))[0] });\n\t\t\tif (screen.width) payload_data.push({ \"key\": \"Screen-Width\", \"value\": screen.width });\n\t\t\tif (screen.height) payload_data.push({ \"key\": \"Screen-Height\", \"value\": screen.height });\n\t\t\tif (screen.colorDepth) payload_data.push({ \"key\": \"Color-Depth\", \"value\": screen.colorDepth });\n\t\t\tpayload_data.push({ \"key\": \"X-ELMAHIO-SEARCH-isClientside\", \"value\": \"true\" });\n\n\t\t\tpayload.data = payload_data;\n\n\t\t\tvar payload_serverVariables = [];\n\t\t\tif (navigator.userAgent) payload_serverVariables.push({ \"key\": \"User-Agent\", \"value\": navigator.userAgent });\n\t\t\tif (document.referrer) payload_serverVariables.push({ \"key\": \"Referer\", \"value\": document.referrer });\n\n\t\t\tpayload.serverVariables = payload_serverVariables;\n\n\t\t\treturn payload;\n\t\t}\n\n\t\tfunction confirmResponse(status, response) {\n\t\t\tif (settings.debug) {\n\t\t\t\tif(status === 'error') {\n\t\t\t\t\tconsole.log('%c \\u2BC8 Error log: ' + '%c \\u2715 Not created ', debugSettings.lightCSS, debugSettings.errorCSS);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('%c \\u2BC8 Error log: ' + '%c \\u2714 ' + response + ' at ' + new Date().toLocaleString() + ' ', debugSettings.lightCSS, debugSettings.successCSS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t//\n\t\t// Unique Methods\n\t\t//\n\n\t\t/**\n\t\t * A private method\n\t\t */\n\t\tvar sendPayload = function (apiKey, logId, callback, errorLog) {\n\t\t\tvar api_key = apiKey,\n\t\t\t\tlog_id = logId,\n\t\t\t\terror = errorLog,\n\t\t\t\tsend = 1,\n\t\t\t\tqueryParams = getSearchParameters();\n\n\t\t\tif ((api_key !== null && log_id !== null) || (paramsLength === 2)) {\n\n\t\t\t\t// Priority for parameters\n\t\t\t\tif (params.hasOwnProperty('apiKey') && params.hasOwnProperty('logId')) {\n\t\t\t\t\tapi_key = params['apiKey'];\n\t\t\t\t\tlog_id = params['logId'];\n\t\t\t\t}\n\n\t\t\t\t// get new XHR object\n\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\txhr.open(\"POST\", \"https://api.elmah.io/v3/messages/\" + log_id + \"?api_key=\" + api_key, true);\n\t\t\t\txhr.setRequestHeader('Content-type', 'application/json');\n\n\t\t\t\txhr.onload = function (e) {\n\t\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\t\tif (xhr.status === 201) {\n\t\t\t\t\t\t\tcallback('success', xhr.statusText);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.onerror = function (e) {\n\t\t\t\t\tcallback('error', xhr.statusText);\n\n\t\t\t\t\t// onError callback\n\t\t\t\t\tif (settings.onError !== null) {\n\t\t\t\t\t\tsettings.onError(xhr.status, xhr.statusText);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar stack = ErrorStackParser(settings).parse(error.error);\n\n\t\t\t\tvar jsonData = {\n\t\t\t\t\t\"detail\": error.error.stack,\n\t\t\t\t\t\"title\": error.message,\n\t\t\t\t\t\"source\": stack && stack.length > 0 ? stack[0].fileName : null,\n\t\t\t\t\t\"severity\": \"Error\",\n\t\t\t\t\t\"type\": error.error.name,\n\t\t\t\t\t\"queryString\": JSON.parse(JSON.stringify(queryParams))\n\t\t\t\t};\n\n\t\t\t\t// Add payload to jsonData\n\t\t\t\tjsonData = merge_objects(jsonData, getPayload());\n\n\t\t\t\t// onFilter callback\n\t\t\t\tif (settings.onFilter !== null) {\n\t\t\t\t\tif (settings.onFilter(jsonData)) {\n\t\t\t\t\t\tsend = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// onMessage callback\n\t\t\t\tif (settings.onMessage !== null) {\n\t\t\t\t\tsettings.onMessage(jsonData);\n\t\t\t\t}\n\n\t\t\t\tif (send === 1) {\n\t\t\t\t\txhr.send(JSON.stringify(jsonData));\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\treturn console.log('Login api error');\n\t\t\t}\n\t\t};\n\n\t\tvar sendManualPayload = function (apiKey, logId, callback, logType, messageLog, errorLog) {\n\t\t\tvar api_key = apiKey,\n\t\t\t\tlog_id = logId,\n\t\t\t\ttype = logType,\n\t\t\t\terror = errorLog,\n\t\t\t\tmessage = messageLog,\n\t\t\t\tsend = 1,\n\t\t\t\tqueryParams = getSearchParameters();\n\n\t\t\tif ((api_key !== null && log_id !== null) || (paramsLength === 2)) {\n\n\t\t\t\t// Priority for parameters\n\t\t\t\tif (params.hasOwnProperty('apiKey') && params.hasOwnProperty('logId')) {\n\t\t\t\t\tapi_key = params['apiKey'];\n\t\t\t\t\tlog_id = params['logId'];\n\t\t\t\t}\n\n\t\t\t\t// get new XHR object\n\t\t\t\tvar xhr = new XMLHttpRequest();\n\t\t\t\txhr.open(\"POST\", \"https://api.elmah.io/v3/messages/\" + log_id + \"?api_key=\" + api_key, true);\n\t\t\t\txhr.setRequestHeader('Content-type', 'application/json');\n\n\t\t\t\txhr.onload = function (e) {\n\t\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\t\tif (xhr.status === 201) {\n\t\t\t\t\t\t\tcallback('success', xhr.statusText);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.onerror = function (e) {\n\t\t\t\t\tcallback('error', xhr.statusText);\n\n\t\t\t\t\t// onError callback\n\t\t\t\t\tif (settings.onError !== null) {\n\t\t\t\t\t\tsettings.onError(xhr.status, xhr.statusText);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar stack = error ? ErrorStackParser(settings).parse(error) : null;\n\n\t\t\t\tvar jsonData = {\n\t\t\t\t\t\"title\": message,\n\t\t\t\t\t\"source\": stack && stack.length > 0 ? stack[0].fileName : null,\n\t\t\t\t\t\"detail\": error ? error.stack : null,\n\t\t\t\t\t\"severity\": type,\n\t\t\t\t\t\"type\": error ? error.name : null,\n\t\t\t\t\t\"queryString\": JSON.parse(JSON.stringify(queryParams))\n\t\t\t\t};\n\n\t\t\t\t// Add payload to jsonData\n\t\t\t\tjsonData = merge_objects(jsonData, getPayload());\n\n\t\t\t\t// onFilter callback\n\t\t\t\tif (settings.onFilter !== null) {\n\t\t\t\t\tif (settings.onFilter(jsonData)) {\n\t\t\t\t\t\tsend = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// onMessage callback\n\t\t\t\tif (settings.onMessage !== null) {\n\t\t\t\t\tsettings.onMessage(jsonData);\n\t\t\t\t}\n\n\t\t\t\tif (send === 1) {\n\t\t\t\t\txhr.send(JSON.stringify(jsonData));\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\treturn console.log('Login api error');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Some public methods\n\t\t */\n\t\tpublicAPIs.error = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Error', msg);\n\t\t};\n\t\tpublicAPIs.error = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Error', msg, error);\n\t\t};\n\n\t\tpublicAPIs.verbose = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Verbose', msg);\n\t\t};\n\t\tpublicAPIs.verbose = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Verbose', msg, error);\n\t\t};\n\n\t\tpublicAPIs.debug = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Debug', msg);\n\t\t};\n\t\tpublicAPIs.debug = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Debug', msg, error);\n\t\t};\n\n\t\tpublicAPIs.information = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Information', msg);\n\t\t};\n\t\tpublicAPIs.information = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Information', msg, error);\n\t\t};\n\n\t\tpublicAPIs.warning = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Warning', msg);\n\t\t};\n\t\tpublicAPIs.warning = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Warning', msg, error);\n\t\t};\n\n\t\tpublicAPIs.fatal = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Fatal', msg);\n\t\t};\n\t\tpublicAPIs.fatal = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Fatal', msg, error);\n\t\t};\n\n\t\tpublicAPIs.log = function (msg) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Log function', msg);\n\t\t};\n\t\tpublicAPIs.log = function (msg, error) {\n\t\t\tsendManualPayload(settings.apiKey, settings.logId, confirmResponse, 'Log function', msg, error);\n\t\t};\n\n\t\t/**\n\t\t * Another public method\n\t\t */\n\t\tpublicAPIs.init = function (options) {\n\n\t\t\t// Merge options into defaults\n\t\t\tsettings = extend(defaults, options || {});\n\n\t\t\t// Code goes here...\n\t\t\twindow.onerror = function (message, source, lineno, colno, error) {\n\n\t\t\t\tvar errorLog = {\n\t\t\t\t\t'message': message,\n\t\t\t\t\t'source': source,\n\t\t\t\t\t'lineno': lineno,\n\t\t\t\t\t'colno': colno,\n\t\t\t\t\t'error': error\n\t\t\t\t}\n\n\t\t\t\tsendPayload(settings.apiKey, settings.logId, confirmResponse, errorLog);\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t};\n\n\t\t// Initialize the plugin\n\t\tpublicAPIs.init(options);\n\n\t\tif (settings.debug) {\n\t\t\tconsole.log('%c' + debugSettings.label, debugSettings.labelCSS);\n\t\t}\n\n\t\t// Return the public APIs\n\t\treturn publicAPIs;\n\n\t};\n\n\n\t//\n\t// Return the constructor\n\t//\n\n\tif (paramsLength && params.hasOwnProperty('apiKey') && params.hasOwnProperty('logId')) {\n\t\t// Immediately-Invoked Function Expression (IIFE)\n\t\treturn new Constructor;\n\t} else {\n\t\t// UMD Constructor\n\t\treturn Constructor;\n\t}\n\n});\n"],"file":"elmahio.js"}